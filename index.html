<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elegant Violet Love Letter ¬∑ 3D Violet Particles</title>
    <!-- Google Fonts for elegance -->
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Playfair+Display:ital@0;1&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            min-height: 100vh;
            background: linear-gradient(145deg, #1a0f1f 0%, #2d1a33 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Playfair Display', serif;
            padding: 1.5rem;
            position: relative;
        }

        /* 3D canvas container (now only violet particles) */
        #flower-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none; /* allows clicking through to UI */
            z-index: 5;
        }

        /* main letter card ‚Äî violet elegance, with slight translucency to let 3D show through edges */
        .letter {
            max-width: 680px;
            width: 100%;
            background: rgba(250, 242, 255, 0.92);
            backdrop-filter: blur(2px);
            background-image: 
                radial-gradient(circle at 30% 40%, rgba(200, 180, 230, 0.2) 0%, transparent 30%),
                radial-gradient(circle at 80% 70%, rgba(150, 120, 200, 0.15) 0%, transparent 40%),
                repeating-linear-gradient(45deg, rgba(180, 150, 210, 0.03) 0px, rgba(180, 150, 210, 0.03) 2px, transparent 2px, transparent 8px);
            border-radius: 28px;
            box-shadow: 
                0 25px 40px -10px rgba(20, 5, 25, 0.7),
                0 0 0 1px rgba(220, 190, 240, 0.6) inset,
                0 0 0 2px rgba(255, 255, 255, 0.6) inset;
            padding: 2.2rem 2.5rem 2.5rem 2.5rem;
            position: relative;
            z-index: 10;  /* above canvas */
            transition: all 0.2s ease;
            margin: 1rem;
        }

        /* decorative corner sprigs (unchanged, but they now overlay 3D) */
        .floral-corner {
            position: absolute;
            width: 90px;
            height: 90px;
            background: transparent;
            pointer-events: none;
            z-index: 12;
        }

        .corner-tl {
            top: 8px;
            left: 8px;
            border-top: 2px solid #b89fd6;
            border-left: 2px solid #b89fd6;
            border-radius: 40px 0 0 0;
            box-shadow: -2px -2px 8px rgba(170, 130, 200, 0.4);
        }

        .corner-tr {
            top: 8px;
            right: 8px;
            border-top: 2px solid #b89fd6;
            border-right: 2px solid #b89fd6;
            border-radius: 0 40px 0 0;
            box-shadow: 2px -2px 8px rgba(170, 130, 200, 0.4);
        }

        .corner-bl {
            bottom: 8px;
            left: 8px;
            border-bottom: 2px solid #b89fd6;
            border-left: 2px solid #b89fd6;
            border-radius: 0 0 0 40px;
            box-shadow: -2px 2px 8px rgba(170, 130, 200, 0.4);
        }

        .corner-br {
            bottom: 8px;
            right: 8px;
            border-bottom: 2px solid #b89fd6;
            border-right: 2px solid #b89fd6;
            border-radius: 0 0 40px 0;
            box-shadow: 2px 2px 8px rgba(170, 130, 200, 0.4);
        }

        .corner-tl::before, .corner-tl::after,
        .corner-tr::before, .corner-tr::after,
        .corner-bl::before, .corner-bl::after,
        .corner-br::before, .corner-br::after {
            content: '';
            position: absolute;
            background: transparent;
            border-radius: 50%;
            border: 1px solid #c9b0e6;
            opacity: 0.8;
        }

        .corner-tl::before { width: 14px; height: 14px; top: 20px; left: 20px; border-color: #b18cd9; box-shadow: 0 0 0 2px rgba(220,200,250,0.4); }
        .corner-tl::after { width: 8px; height: 8px; top: 42px; left: 36px; border: 1px solid #b69de0; background: #dac0f5; opacity: 0.6; }
        .corner-tr::before { width: 18px; height: 18px; top: 16px; right: 18px; border: 1px solid #b798e0; border-style: dashed; }
        .corner-tr::after { width: 10px; height: 10px; top: 40px; right: 32px; border: 1px solid #b18cd9; background: #ecd9ff; }
        .corner-bl::before { width: 12px; height: 12px; bottom: 25px; left: 20px; border: 1px solid #ae87cf; }
        .corner-bl::after { width: 16px; height: 16px; bottom: 40px; left: 40px; border: 1px solid #c3a4ea; border-right-color: transparent; transform: rotate(20deg); }
        .corner-br::before { width: 15px; height: 15px; bottom: 20px; right: 24px; border: 1px solid #be9ee3; background: #eed5ff; }
        .corner-br::after { width: 9px; height: 9px; bottom: 45px; right: 40px; border: 1px solid #b28ed7; background: #f1e1ff; }

        /* violet wax seal */
        .violet-seal {
            position: absolute;
            top: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 55px;
            height: 55px;
            background: radial-gradient(circle at 30% 30%, #b595d4, #6f4f8f);
            border-radius: 50% 50% 50% 10%;
            rotate: 15deg;
            box-shadow: 0 8px 12px rgba(50,20,60,0.6), 0 0 0 3px #f0e0fc inset, 0 0 0 5px #cab3e9 inset;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 30px; /* slightly larger for emoji */
            color: #f7eaff;
            text-shadow: 2px 2px 0 #4e2f62;
            z-index: 15;
            font-family: 'Great Vibes', cursive;
            line-height: 1;
            padding-bottom: 8px;
        }

        .letter h1 {
            font-family: 'Great Vibes', cursive;
            font-size: 3.2rem;
            font-weight: 400;
            text-align: center;
            color: #4a2b55;
            margin-top: 0.5rem;
            margin-bottom: 0.5rem;
            letter-spacing: 0.5px;
            text-shadow: 1px 1px 2px rgba(220,200,250,0.8), 2px 2px 4px rgba(150,120,170,0.2);
            border-bottom: 1px dashed #d9c1f0;
            padding-bottom: 0.6rem;
        }

        .salutation {
            font-family: 'Playfair Display', serif;
            font-size: 1.6rem;
            font-style: italic;
            color: #3f294b;
            margin-bottom: 0.8rem;
            letter-spacing: 1px;
            border-left: 3px solid #b696d1;
            padding-left: 15px;
        }

        .verse {
            font-size: 1.1rem;
            line-height: 1.8;
            color: #2f1e38;
            margin: 1.4rem 0 1.6rem 0;
            text-align: left;
            padding: 0 0.5rem;
        }

        .verse p {
            margin-bottom: 1.4rem;
            text-indent: 0;
        }

        .verse p::first-letter {
            font-size: 2.8rem;
            font-family: 'Great Vibes', cursive;
            color: #774e8b;
            float: left;
            line-height: 0.8;
            margin-right: 8px;
            text-shadow: 2px 2px 6px #dcc0f0;
        }

        .divider {
            text-align: center;
            margin: 1.8rem 0 1.2rem;
            color: #ac8ac9;
            font-size: 1.4rem;
            letter-spacing: 10px;
        }

        .closing {
            margin-top: 2rem;
            text-align: right;
            font-family: 'Great Vibes', cursive;
            font-size: 2.4rem;
            color: #4a2b60;
            padding-right: 1rem;
            border-top: 1px solid #dcc0f0;
            padding-top: 1.2rem;
            position: relative;
        }

        .closing span {
            font-size: 1.2rem;
            font-family: 'Playfair Display', serif;
            font-style: italic;
            color: #6f4f85;
            display: block;
            margin-top: 0.3rem;
            letter-spacing: 1px;
        }

        .sig-flourish {
            display: inline-block;
            width: 28px;
            height: 28px;
            background: radial-gradient(circle, #c7aae6 0%, #a57fc9 80%);
            border-radius: 50% 50% 0 50%;
            rotate: 10deg;
            margin-right: 10px;
            box-shadow: 0 2px 5px #8f6fab;
            border: 2px solid #f3e6ff;
            vertical-align: middle;
        }

        /* music control button ‚Äî elegant violet */
        .music-control {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: #4a2b60;
            color: #f3e6ff;
            border: 2px solid #c7aae6;
            border-radius: 50px;
            padding: 12px 22px;
            font-size: 1.1rem;
            font-family: 'Great Vibes', cursive;
            letter-spacing: 1px;
            box-shadow: 0 6px 15px rgba(0,0,0,0.5), 0 0 0 2px #ecd9ff inset;
            cursor: pointer;
            z-index: 50;
            backdrop-filter: blur(4px);
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .music-control:hover {
            background: #603a7a;
            box-shadow: 0 8px 20px #3d1f4d;
            transform: scale(1.02);
        }

        .music-control:active {
            transform: scale(0.98);
        }

        .music-icon {
            font-size: 1.5rem;
        }

        /* small violet postscript */
        .postscript {
            font-size: 0.9rem; 
            font-family: 'Playfair Display', serif; 
            color: #7b5f93; 
            margin-top: 0.8rem; 
            font-style: normal; 
            letter-spacing: 0.5px; 
            border-top: 1px dashed #d9c1f0; 
            padding-top: 0.8rem; 
            text-align: center;
        }

        /* adjust for mobile */
        @media (max-width: 500px) {
            .letter { padding: 1.5rem; }
            .letter h1 { font-size: 2.6rem; }
            .closing { font-size: 2rem; }
        }
    </style>
</head>
<body>

    <!-- Canvas for 3D violet particles (flowers removed, only emoji remains) -->
    <canvas id="flower-canvas"></canvas>

    <!-- Elegant Violet Love Letter -->
    <div class="letter">
        <div class="floral-corner corner-tl"></div>
        <div class="floral-corner corner-tr"></div>
        <div class="floral-corner corner-bl"></div>
        <div class="floral-corner corner-br"></div>
        <div class="violet-seal"><span>ü™ª</span></div>  <!-- violet emoji only, as requested -->

        <h1>My Salamat po Mica</h1>
        <div class="salutation"> dear Ka away ko,</div>
        <div class="verse">
            <p>Hi Mica! Hindi dapat yung letter na yun, kaso wala na, tripan ko e. Pero ngayon ko lang kasi natapos 'to. Binigyan kita flowers para pang-bawi ko sayo, then dahil din Valentine‚Äôs, binigyan na kita. Deserve mo rin naman makatanggap ng ganyan e.</p>
            <p>Don't pressure yourself sa mga bagay-bagay sa pag-aaral, hinay-hinay lang. Pag may problema ka, magsabi ka lang sakin; andito lang me makikinig. Malay mo naman may ma-advice akong matino sayo, HAHAHAHAHHAHAHA.</p>
            <p>Then, thank you for being my best friend, my comfort place. Thank you for all the memories we made throughout the year, and I hope we don't forget that as we meet, we'll still be best friends. Thank you for being there when I needed someone, making me laugh, supporting me, and understanding me. When I'm with you, I feel so happy. Thank you for listening even though I know you're also going through a lot. Having you is the best thing that happened to me, and I just wanna say sorry for all the problems I brought into your life. There are no words that can describe how thankful I am to have you as my best friend. From the bottom of my heart, thank you for being my best friend and my comfort place.</p>
        </div>
        <div class="closing">
        <div class="postscript">‚ÄúViolets are blue, but you are every colour.‚Äù</div>
        </div>
    </div>

    <!-- Music control button -->
    <div class="music-control" id="music-toggle">
        <span class="music-icon" id="music-icon">‚ô™</span>
        <span id="music-text">Pause music</span>
    </div>

    <!-- Audio element (autoplay) using a reliable instrumental track -->
    <audio id="bg-music" loop preload="auto" autoplay crossorigin="anonymous">
        <source src="bruno mars ‚ú® count on me ‚ú® ~ lyrics (mp3cut.net).mp3" type="audio/mpeg">
        Your browser does not support the audio element.
    </audio>

    <!-- Three.js library -->
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.128.0/build/three.module.js"
            }
        }
    </script>

    <script type="module">
        // ----- 3D Violet Particles only (flowers completely removed) -----
        import * as THREE from 'three';

        // Scene setup
        const canvas = document.getElementById('flower-canvas');
        const scene = new THREE.Scene();
        scene.background = null; // transparent
        
        const camera = new THREE.PerspectiveCamera(55, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(2, 1.5, 5);
        camera.lookAt(0, 0.5, 0);

        const renderer = new THREE.WebGLRenderer({ canvas, alpha: true, antialias: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));

        // Soft lighting (still needed for particles if we had meshes, but kept for ambiance)
        const ambientLight = new THREE.AmbientLight(0x404060);
        scene.add(ambientLight);

        // Add subtle fog to blend with background
        scene.fog = new THREE.FogExp2(0x1a0f1f, 0.05);

        // ----- Only floating violet particles (no flowers) -----
        const particleCount = 500; // more particles for a richer emoji-violet vibe
        const particleGeo = new THREE.BufferGeometry();
        const particlePositions = new Float32Array(particleCount * 3);
        const particleColors = new Float32Array(particleCount * 3);

        for (let i = 0; i < particleCount; i++) {
            // Distribute in a spherical cloud
            const r = 2.0 + Math.random() * 4.0; // radius range
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.acos(2 * Math.random() - 1);
            
            particlePositions[i*3] = Math.sin(phi) * Math.cos(theta) * r;
            particlePositions[i*3+1] = Math.sin(phi) * Math.sin(theta) * r * 0.5; // flatten vertically a bit
            particlePositions[i*3+2] = Math.cos(phi) * r;

            // Violet shades: hue between 0.65 and 0.85 (purple to violet)
            const color = new THREE.Color().setHSL(0.68 + Math.random()*0.2, 0.8, 0.6);
            particleColors[i*3] = color.r;
            particleColors[i*3+1] = color.g;
            particleColors[i*3+2] = color.b;
        }

        particleGeo.setAttribute('position', new THREE.BufferAttribute(particlePositions, 3));
        particleGeo.setAttribute('color', new THREE.BufferAttribute(particleColors, 3));

        const particleMat = new THREE.PointsMaterial({ 
            size: 0.09, 
            vertexColors: true, 
            transparent: true,
            blending: THREE.AdditiveBlending,
            depthWrite: false,
            opacity: 0.9
        });
        const particles = new THREE.Points(particleGeo, particleMat);
        scene.add(particles);

        // Also add a few larger sparkles (scattered)
        const sparkleCount = 80;
        const sparkleGeo = new THREE.BufferGeometry();
        const sparklePositions = new Float32Array(sparkleCount * 3);
        const sparkleColors = new Float32Array(sparkleCount * 3);

        for (let i = 0; i < sparkleCount; i++) {
            const r = 1.5 + Math.random() * 3;
            const theta = Math.random() * Math.PI * 2;
            const phi = Math.acos(2 * Math.random() - 1);
            
            sparklePositions[i*3] = Math.sin(phi) * Math.cos(theta) * r;
            sparklePositions[i*3+1] = Math.sin(phi) * Math.sin(theta) * r * 0.6;
            sparklePositions[i*3+2] = Math.cos(phi) * r;

            // Lighter violet / white
            const color = new THREE.Color().setHSL(0.72 + Math.random()*0.15, 0.9, 0.75);
            sparkleColors[i*3] = color.r;
            sparkleColors[i*3+1] = color.g;
            sparkleColors[i*3+2] = color.b;
        }

        sparkleGeo.setAttribute('position', new THREE.BufferAttribute(sparklePositions, 3));
        sparkleGeo.setAttribute('color', new THREE.BufferAttribute(sparkleColors, 3));

        const sparkleMat = new THREE.PointsMaterial({ 
            size: 0.15, 
            vertexColors: true, 
            transparent: true,
            blending: THREE.AdditiveBlending,
            depthWrite: false
        });
        const sparkles = new THREE.Points(sparkleGeo, sparkleMat);
        scene.add(sparkles);

        // Animation variables
        let time = 0;

        // resize handler
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // animation loop
        function animate() {
            requestAnimationFrame(animate);

            time += 0.0015;

            // Rotate particle clouds slowly
            particles.rotation.y += 0.0004;
            particles.rotation.x += 0.0001;
            sparkles.rotation.y -= 0.0003;
            sparkles.rotation.z += 0.0002;

            // Gentle camera movement
            camera.position.x = 1.8 * Math.sin(time * 0.2);
            camera.position.z = 5.2 + Math.sin(time * 0.3) * 0.4;
            camera.lookAt(0, 0.5, 0);

            renderer.render(scene, camera);
        }

        animate();

        // ----- Music control (same as before) -----
        const audio = document.getElementById('bg-music');
        const toggleBtn = document.getElementById('music-toggle');
        const icon = document.getElementById('music-icon');
        const text = document.getElementById('music-text');

        audio.volume = 0.35;

        let isPlaying = true;

        audio.addEventListener('playing', () => {
            isPlaying = true;
            icon.innerText = '‚ô™';
            text.innerText = 'Pause music';
        });

        audio.addEventListener('pause', () => {
            isPlaying = false;
            icon.innerText = '‚ô´';
            text.innerText = 'Play music';
        });

        const playPromise = audio.play();
        if (playPromise !== undefined) {
            playPromise.then(() => {
                isPlaying = true;
                icon.innerText = '‚ô™';
                text.innerText = 'Pause music';
            }).catch(() => {
                isPlaying = false;
                icon.innerText = '‚ô´';
                text.innerText = 'Play music';
                console.log('Autoplay blocked. Click to start.');
            });
        }

        toggleBtn.addEventListener('click', () => {
            if (isPlaying) {
                audio.pause();
            } else {
                audio.play().catch(e => console.log('Playback failed:', e));
                icon.innerText = '‚ô™';
                text.innerText = 'Pause music';
                isPlaying = true;
            }
        });

        audio.addEventListener('ended', () => {
            isPlaying = false;
            icon.innerText = '‚ô´';
            text.innerText = 'Play music';
        });
    </script>
</body>
</html>

